# from contextlib import closing

# import settings
# from main import get_result


# class TestInitial:
#     def test_initial_data(self, db_migrations, db_data):
#         db_conn = db_migrations(settings.MIGRATION_INITIAL)
#         with closing(db_conn) as conn:
#             db_data(conn, 'exchange_rates', [
#                 ('2018-04-01 00:00:00', 'USD', 'GBP', '0.71'),
#                 ('2018-04-01 00:00:05', 'USD', 'GBP', '0.82'),
#                 ('2018-04-01 00:01:00', 'USD', 'GBP', '0.92'),
#                 ('2018-04-01 01:02:00', 'USD', 'GBP', '0.62'),

#                 ('2018-04-01 02:00:00', 'USD', 'GBP', '0.71'),
#                 ('2018-04-01 03:00:05', 'USD', 'GBP', '0.82'),
#                 ('2018-04-01 04:01:00', 'USD', 'GBP', '0.92'),
#                 ('2018-04-01 04:22:00', 'USD', 'GBP', '0.62'),

#                 ('2018-04-01 00:00:00', 'EUR', 'GBP', '1.71'),
#                 ('2018-04-01 01:00:05', 'EUR', 'GBP', '1.82'),
#                 ('2018-04-01 01:01:00', 'EUR', 'GBP', '1.92'),
#                 ('2018-04-01 01:02:00', 'EUR', 'GBP', '1.62'),

#                 ('2018-04-01 02:00:00', 'EUR', 'GBP', '1.71'),
#                 ('2018-04-01 03:00:05', 'EUR', 'GBP', '1.82'),
#                 ('2018-04-01 04:01:00', 'EUR', 'GBP', '1.92'),
#                 ('2018-04-01 05:22:00', 'EUR', 'GBP', '1.62'),

#                 ('2018-04-01 05:22:00', 'EUR', 'HUF', '0.062'),
#             ])

#             db_data(conn, 'transactions', [
#                 ('2018-04-01 00:00:00', 1, 'EUR', 2.45),
#                 ('2018-04-01 01:00:00', 1, 'EUR', 8.45),
#                 ('2018-04-01 01:30:00', 1, 'USD', 3.5),
#                 ('2018-04-01 20:00:00', 1, 'EUR', 2.45),

#                 ('2018-04-01 00:30:00', 2, 'USD', 2.45),
#                 ('2018-04-01 01:20:00', 2, 'USD', 0.45),
#                 ('2018-04-01 01:40:00', 2, 'USD', 33.5),
#                 ('2018-04-01 18:00:00', 2, 'EUR', 12.45),

#                 ('2018-04-01 18:01:00', 3, 'GBP', 2),

#                 ('2018-04-01 00:01:00', 4, 'USD', 2),
#                 ('2018-04-01 00:01:00', 4, 'GBP', 2),
#             ])

#             assert get_result(conn, '2018-04-01') == 2
